![image-20210529122255830](../../../../../AppData/Roaming/Typora/typora-user-images/image-20210529122255830.png)



### 一、课程设计步骤

#### 1. 计算机的功能和用途

实现基本的指令集，根据指令集编程完成（A1）加（A2）→A3，A1、A2、A3为内存地址。PSW状态寄存器保存程序运行后的CVNZ状态，程序运行结束自动停机。

#### 2.指令系统

+ 基本字长：8位

+ 指令格式：
  指令格式有单字长指令和双字长指令两种
  在双字长格式中，第二字节定义为操作数或操作数地址。

+ 指令类型：
  本机器有双操作数指令和无操作数指令，操作码共4位

+ 寻址方式：
  直接寻址

+ 指令集：
  ![image-20210529234023381](../../../../../AppData/Roaming/Typora/typora-user-images/image-20210529234023381.png)


#### 3.总体结构

![image-20210530081202898](../../../../../AppData/Roaming/Typora/typora-user-images/image-20210530081202898.png)

+ 寄存器组的设置

  + 通用寄存器组：R0,R1,R2,R3,8位。
  + Y和Z为数据寄存器，8位。
  + PSW为状态寄存器，8位，存放程序状态字CVNZ。
  + IR为指令寄存器，8位。
  + PC为程序计数器，8位。
  + MAR为存储器地址寄存器，8位。
  + MDR为存储器数据寄存器，8位。

+ 加法器的设置

  加法器是由八个一位全加器构成，全加器之间采用简单的串行进位。

+ 数据通路

  数据通路是以总线为基础,以CPU为核心构成的。

#### 4.逻辑设计

1. 通用寄存器组的设计：

   13个输入端：i0~i7接收从总线传来的数据；CK为寄存器的输入脉冲；CR连接所有寄存器的清零端；tongYongCK0和tongYongCK1连接一个24译码器，接收来自IR的寄存器编码，输出选择的寄存器，与CK信号与一下，使所选择的寄存器有效，输出相应的内容；tongYongXuan控制整个寄存器组是否有效，和24译码器的4个输出与一下，若有效，则可以根据译码结果选择某个寄存器，若无效，则没有寄存器被选择。

   8个输出端：输出所选择的相应寄存器的内容

2. 三态门的设计：

   设计了从通用寄存器组到总线方向的、从PC到总线方向的、总线到MDR方向的、MDR到总线方向的、MDR到M方向的、M到MDR方向的三态门，控制数据的流动方向。

3. 部件之间的连接：

   部件之间的连接是采用以CPU为中心的总线连接方式。

#### 5. 控制方式

1. 微指令字段定义

   ![image-20210530101331254](../../../../../AppData/Roaming/Typora/typora-user-images/image-20210530101331254.png)

   ...（各位表示的含义）

2. 后继微地址形成

   三种形成方式：uPC+1,JP,QJP

   当JP=1,QJP=0时，Y7Y6Y5Y4Y3Y2Y1=00000000;

   当JP=0,QJP=1时，Y7Y6Y5Y4Y3Y2Y1Y0 = IR7 IR6 IR5 IR4 0 0 0 0；

#### 6.编制指令流程

1. 操作码二进制代码：

   LD：0001

   ADD:0010

   STA:0011

   HALT:1111

2. 微程序入口：（16进制代码）

   取指令入口：00H
   LD入口：10H
   ADD入口：20H
   STA入口：30H
   HALT入口：F0H

3. 指令执行流程：（见微指令和我的笔记）

#### 7. 编制微指令流程

根据指令流程和微指令格式就可以开始编制微程序。
指令流程中每行对应一条微指令，结合总体结构框图，可以写出这个流程所对应的数据通路的控制命令。见附表。





